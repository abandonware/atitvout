Index: atitvout-trunk/lrmi-0.6/lrmi.c
===================================================================
--- atitvout-trunk.orig/lrmi-0.6/lrmi.c	2009-05-24 22:08:40.000000000 +0200
+++ atitvout-trunk/lrmi-0.6/lrmi.c	2009-05-24 22:11:42.000000000 +0200
@@ -26,6 +26,13 @@
 
 #include "lrmi.h"
 
+#if defined(__linux__) && !defined(TF_MASK)
+	#define TF_MASK X86_EFLAGS_TF
+	#define IF_MASK X86_EFLAGS_IF
+	#define VIF_MASK X86_EFLAGS_VIF
+	#define IOPL_MASK X86_EFLAGS_IOPL
+#endif
+
 #define REAL_MEM_BASE 	((void *)0x10000)
 #define REAL_MEM_SIZE 	0x10000
 #define REAL_MEM_BLOCKS 	0x100
@@ -880,4 +887,3 @@
 
 	return vret;
 	}
-
